# Enable mod_rewrite
RewriteEngine On
RewriteBase /

# ---------------------------------------------------------------
# ✅ 1. Serve existing files and folders normally
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# ---------------------------------------------------------------
# ✅ 2. Rewrite clean URLs (with trailing slash) to .html files
# Example: /sale/5thfloor/Property/ → /sale/5thfloor/Property.html
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)/$ $1.html [NC,L]

# ---------------------------------------------------------------
# ✅ 3. Force trailing slash for clean URLs if .html file exists
# Example: /sale/5thfloor/Property → /sale/5thfloor/Property/
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+?[^/])$ $1/ [R=301,L]

# ---------------------------------------------------------------
# ✅ 4. Rewrite main page (find-a-property)
# ---------------------------------------------------------------
RewriteRule ^find-a-property/?$ find-a-property.html [L]

# ---------------------------------------------------------------
# ✅ 5. Rewrite subpages manually (you can add more as needed)
# ---------------------------------------------------------------
RewriteRule ^find-a-property/bangalore/sale/1stfloor/Property/?$ find-a-property/bangalore/sale/1stfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/2ndfloor/Property/?$ find-a-property/bangalore/sale/2ndfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/3rdfloor/Property/?$ find-a-property/bangalore/sale/3rdfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/4thfloor/Property/?$ find-a-property/bangalore/sale/4thfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/5thfloor/Property/?$ find-a-property/bangalore/sale/5thfloor/Property.html [L]

# ---------------------------------------------------------------
# ✅ 6. Generic rule for any other clean URL that matches a .html file
# ---------------------------------------------------------------
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^([a-zA-Z0-9\-_\/]+)/?$ $1.html [L]

# ---------------------------------------------------------------
# ✅ 7. Disable directory listing (security)
# ---------------------------------------------------------------
Options -Indexes

# ---------------------------------------------------------------
# ✅ 8. Custom 404 page
# ---------------------------------------------------------------
ErrorDocument 404 /404.html
