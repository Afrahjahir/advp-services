# Enable mod_rewrite
RewriteEngine On
RewriteBase /

# ---------------------------------------------------------------
# 1. Serve existing files and folders normally
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# ---------------------------------------------------------------
# 2. Rewrite clean URLs WITH trailing slash → to .html
# Example: /sale/5thfloor/Property/ → Property.html
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)/$ $1.html [NC,L]

# ---------------------------------------------------------------
# 3. Force trailing slash if .html file exists
# Example: /sale/5thfloor/Property → /sale/5thfloor/Property/
# ---------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+?[^/])$ $1/ [R=301,L]

# ---------------------------------------------------------------
# 4. Main page rewrite
# ---------------------------------------------------------------
RewriteRule ^find-a-property/?$ find-a-property.html [L]

# ---------------------------------------------------------------
# 5. MANUAL property subpages
# ---------------------------------------------------------------
RewriteRule ^find-a-property/bangalore/sale/1stfloor/Property/?$ find-a-property/bangalore/sale/1stfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/2ndfloor/Property/?$ find-a-property/bangalore/sale/2ndfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/3rdfloor/Property/?$ find-a-property/bangalore/sale/3rdfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/4thfloor/Property/?$ find-a-property/bangalore/sale/4thfloor/Property.html [L]
RewriteRule ^find-a-property/bangalore/sale/5thfloor/Property/?$ find-a-property/bangalore/sale/5thfloor/Property.html [L]

# ---------------------------------------------------------------
# 6. SERVICES — must be BEFORE generic rule
# ---------------------------------------------------------------
RewriteRule ^services/?$ services.html [L]
RewriteRule ^services/home-loan/?$ services/home-loan.html [L]
RewriteRule ^services/best-real-estate-consultants/?$ services/best-real-estate-consultants.html [L]
RewriteRule ^services/buy-a-property/?$ services/buy-a-property.html [L]
RewriteRule ^services/construction/?$ services/construction.html [L]
RewriteRule ^services/property-management/?$ services/property-management.html [L]
RewriteRule ^services/rent-lease-properties/?$ services/rent-lease-properties.html [L]
RewriteRule ^services/sell-properties/?$ services/sell-properties.html [L]

# ---------------------------------------------------------------
# 7. Generic rule for all other URLs
# ---------------------------------------------------------------
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^([a-zA-Z0-9\-_\/]+)/?$ $1.html [L]

# ---------------------------------------------------------------
# 8. Disable directory listing
# ---------------------------------------------------------------
Options -Indexes

# ---------------------------------------------------------------
# 9. Custom 404 page
# ---------------------------------------------------------------
ErrorDocument 404 /404.html
